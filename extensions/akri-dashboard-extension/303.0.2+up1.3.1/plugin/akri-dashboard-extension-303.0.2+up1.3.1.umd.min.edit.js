(("undefined"!==typeof self?self:this)["webpackChunkakri_dashboard_extension_303_0_2_up1_3_1"]=("undefined"!==typeof self?self:this)["webpackChunkakri_dashboard_extension_303_0_2_up1_3_1"]||[]).push([[739],{42844:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return De}});var o=a(9274);const r={class:"row"},i={class:"col span-6"},l={key:1,class:"row"},s={class:"col span-12"},n={class:"icon icon-info"},c={class:"row mb-20"},d={class:"col span-12"},u={class:"icon icon-info"},p={class:"mb-10"},v={class:"icon icon-info"},m={class:"mb-10"},y={class:"icon icon-info"},f={class:"mb-10"},h={class:"icon icon-info"},g={class:"mb-10"},b={class:"icon icon-info"},k={class:"row"},N={class:"col span-6"};function S(e,t,a,S,R,D){const V=(0,o.resolveComponent)("Loading"),C=(0,o.resolveComponent)("NameNsDescription"),E=(0,o.resolveComponent)("DiscoveryHandlerNameField"),w=(0,o.resolveComponent)("UdevFields"),H=(0,o.resolveComponent)("YamlEditor"),P=(0,o.resolveComponent)("DiscoveryProperties"),M=(0,o.resolveComponent)("Tab"),B=(0,o.resolveComponent)("LabeledInput"),_=(0,o.resolveComponent)("Tabbed"),U=(0,o.resolveComponent)("CruResource"),A=(0,o.resolveDirective)("clean-tooltip");return a.value?((0,o.openBlock)(),(0,o.createBlock)(U,{key:1,"done-route":e.doneRoute,"can-yaml":!0,mode:a.mode,resource:a.value,errors:e.fvUnreportedValidationErrors,"validation-passed":e.fvFormIsValid,onError:t[10]||(t[10]=t=>e.errors=t),onFinish:e.save,onCancel:e.done},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(C,{value:a.value,mode:a.mode,"description-hidden":!0,onIsNamespaceNew:t[0]||(t[0]=e=>R.isNamespaceNew=e),onInput:t[1]||(t[1]=t=>e.$emit("input",t))},null,8,["value","mode"]),(0,o.createVNode)(_,{"side-tabs":!0,onChanged:D.onTabChanged},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(M,{name:"discoveryHandler",label:e.t("akri.edit.configuration.tabs.discoveryHandler.title"),weight:5,error:D.tabErrors.discoveryHandler},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",r,[(0,o.createElementVNode)("div",i,[(0,o.createVNode)(E,{value:D.discoveryHandlerName,"onUpdate:value":t[2]||(t[2]=e=>D.discoveryHandlerName=e),mode:a.mode,"discovery-handler-names":D.discoveryHandlerNames,loading:e.isLoadingSecondaryResources,rules:e.fvGetAndReportPathRules("discoveryHandlerName")},null,8,["value","mode","discovery-handler-names","loading","rules"])])]),t[11]||(t[11]=(0,o.createElementVNode)("div",{class:"spacer"},null,-1)),"udev"===D.discoveryHandlerName?((0,o.openBlock)(),(0,o.createBlock)(w,{key:0,mode:a.mode,value:a.value},null,8,["mode","value"])):((0,o.openBlock)(),(0,o.createElementBlock)("div",l,[(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("h3",null,[(0,o.createTextVNode)((0,o.toDisplayString)(e.t("akri.edit.configuration.fields.discoveryDetailsYaml.label"))+" ",1),(0,o.withDirectives)((0,o.createElementVNode)("i",n,null,512),[[A,e.t("akri.edit.configuration.fields.discoveryDetailsYaml.tooltip")]])]),(0,o.createVNode)(H,{ref:"discoveryHandlerEditorRef",value:D.discoveryDetailsYaml,"onUpdate:value":t[3]||(t[3]=e=>D.discoveryDetailsYaml=e),"editor-mode":D.editorMode,class:"yaml-editor"},null,8,["value","editor-mode"])])])),t[12]||(t[12]=(0,o.createElementVNode)("div",{class:"spacer"},null,-1)),(0,o.createElementVNode)("div",c,[(0,o.createElementVNode)("div",d,[(0,o.createElementVNode)("h3",null,[(0,o.createTextVNode)((0,o.toDisplayString)(e.t("akri.edit.configuration.fields.discoveryProperties.label"))+" ",1),(0,o.withDirectives)((0,o.createElementVNode)("i",u,null,512),[[A,e.t("akri.edit.configuration.fields.discoveryProperties.tooltip")]])]),(0,o.createVNode)(P,{value:D.discoveryProperties,"onUpdate:value":t[4]||(t[4]=e=>D.discoveryProperties=e),mode:a.mode,"config-maps":R.configMaps,secrets:R.secrets,loading:e.isLoadingSecondaryResources},null,8,["value","mode","config-maps","secrets","loading"])])])])),_:1},8,["label","error"]),(0,o.createVNode)(M,{name:"brokerPod",label:e.t("akri.edit.configuration.tabs.brokerPod.title"),weight:4},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("p",p,[(0,o.createTextVNode)((0,o.toDisplayString)(e.t("akri.edit.configuration.fields.brokerPodSpec.label"))+" ",1),(0,o.withDirectives)((0,o.createElementVNode)("i",v,null,512),[[A,e.t("akri.edit.configuration.fields.brokerPodSpec.tooltip")]])]),(0,o.createVNode)(H,{ref:"brokerPodEditorRef",value:D.brokerPodSpec,"onUpdate:value":t[5]||(t[5]=e=>D.brokerPodSpec=e),"as-object":!0,"editor-mode":D.editorMode,class:"yaml-editor"},null,8,["value","editor-mode"])])),_:1},8,["label"]),(0,o.createVNode)(M,{name:"brokerJob",label:e.t("akri.edit.configuration.tabs.brokerJob.title"),weight:3},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("p",m,[(0,o.createTextVNode)((0,o.toDisplayString)(e.t("akri.edit.configuration.fields.brokerJobSpec.label"))+" ",1),(0,o.withDirectives)((0,o.createElementVNode)("i",y,null,512),[[A,e.t("akri.edit.configuration.fields.brokerJobSpec.tooltip")]])]),(0,o.createVNode)(H,{ref:"brokerJobEditorRef",value:D.brokerJobSpec,"onUpdate:value":t[6]||(t[6]=e=>D.brokerJobSpec=e),"as-object":!0,"editor-mode":D.editorMode,class:"yaml-editor"},null,8,["value","editor-mode"])])),_:1},8,["label"]),(0,o.createVNode)(M,{name:"instanceService",label:e.t("akri.edit.configuration.tabs.instanceService.title"),weight:2},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("p",f,[(0,o.createTextVNode)((0,o.toDisplayString)(e.t("akri.edit.configuration.fields.instanceServiceSpec.label"))+" ",1),(0,o.withDirectives)((0,o.createElementVNode)("i",h,null,512),[[A,e.t("akri.edit.configuration.fields.instanceServiceSpec.tooltip")]])]),(0,o.createVNode)(H,{ref:"instanceServiceEditorRef",value:D.instanceServiceSpec,"onUpdate:value":t[7]||(t[7]=e=>D.instanceServiceSpec=e),"as-object":!0,"editor-mode":D.editorMode,class:"yaml-editor"},null,8,["value","editor-mode"])])),_:1},8,["label"]),(0,o.createVNode)(M,{name:"configurationService",label:e.t("akri.edit.configuration.tabs.configurationService.title"),weight:1},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("p",g,[(0,o.createTextVNode)((0,o.toDisplayString)(e.t("akri.edit.configuration.fields.configurationServiceSpec.label"))+" ",1),(0,o.withDirectives)((0,o.createElementVNode)("i",b,null,512),[[A,e.t("akri.edit.configuration.fields.configurationServiceSpec.tooltip")]])]),(0,o.createVNode)(H,{ref:"configurationServiceEditorRef",value:D.configurationServiceSpec,"onUpdate:value":t[8]||(t[8]=e=>D.configurationServiceSpec=e),"as-object":!0,"editor-mode":D.editorMode,class:"yaml-editor"},null,8,["value","editor-mode"])])),_:1},8,["label"]),(0,o.createVNode)(M,{name:"capacity",label:e.t("akri.edit.configuration.tabs.capacity.title"),weight:0,error:D.tabErrors.capacity},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",k,[(0,o.createElementVNode)("div",N,[(0,o.createVNode)(B,{value:D.capacity,"onUpdate:value":t[9]||(t[9]=e=>D.capacity=e),type:"number",label:e.t("akri.edit.configuration.fields.capacity.label"),tooltip:e.t("akri.edit.configuration.fields.capacity.tooltip"),min:"1",rules:e.fvGetAndReportPathRules("capacity")},null,8,["value","label","tooltip","rules"])])])])),_:1},8,["label","error"])])),_:1},8,["onChanged"])])),_:1},8,["done-route","mode","resource","errors","validation-passed","onFinish","onCancel"])):((0,o.openBlock)(),(0,o.createBlock)(V,{key:0}))}var R=a(14220),D=a(1103),V=a(2517),C=a(77651),E=a(32786),w=a(49584),H=a(10006),P=a(35664),M=a(76978),B=a(97305),_=a(11839),U=a(83331),A=a(84409);function F(e,t,a,r,i,l){const s=(0,o.resolveComponent)("DiscoveryPropertyField"),n=(0,o.resolveDirective)("t");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(i.properties,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:e.id},[(0,o.createVNode)(s,{value:e.value,"onUpdate:value":[t=>e.value=t,l.updateRow],secrets:a.secrets,"config-maps":a.configMaps,mode:a.mode,loading:a.loading,onRemove:e=>l.removeRow(t)},null,8,["value","onUpdate:value","secrets","config-maps","mode","loading","onRemove"])])))),128)),l.isView?(0,o.createCommentVNode)("",!0):(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,type:"button",class:"btn role-tertiary add","data-testid":"add-discovery-property",onClick:t[0]||(t[0]=(...e)=>l.addProperty&&l.addProperty(...e))},null,512)),[[n,"akri.edit.configuration.fields.discoveryProperties.addLabel"]])])}var x=a(12784),L=a.n(x),K=a(92043);const T={class:"var-row"},I={class:"type"},O={class:"name"},q={key:0,class:"single-value"},j={key:0},$={class:"remove"};function J(e,t,a,r,i,l){const s=(0,o.resolveComponent)("LabeledSelect"),n=(0,o.resolveComponent)("LabeledInput");return(0,o.openBlock)(),(0,o.createElementBlock)("div",T,[(0,o.createElementVNode)("div",I,[(0,o.createVNode)(s,{value:i.type,"onUpdate:value":[t[0]||(t[0]=e=>i.type=e),l.updateRow],mode:a.mode,multiple:!1,options:l.typeOpts,"option-label":"label",searchable:!1,reduce:e=>e.value,label:e.t("akri.edit.configuration.fields.discoveryProperties.type")},null,8,["value","mode","options","reduce","label","onUpdate:value"])]),(0,o.createElementVNode)("div",O,[(0,o.createVNode)(n,{value:i.name,"onUpdate:value":[t[1]||(t[1]=e=>i.name=e),l.updateRow],label:e.t("akri.edit.configuration.fields.discoveryProperties.name.label"),placeholder:e.t("akri.edit.configuration.fields.discoveryProperties.name.placeholder"),mode:a.mode},null,8,["value","label","placeholder","mode","onUpdate:value"])]),"simple"===i.type?((0,o.openBlock)(),(0,o.createElementBlock)("div",q,[(0,o.createVNode)(n,{value:i.valStr,"onUpdate:value":[t[2]||(t[2]=e=>i.valStr=e),l.updateRow],label:e.t("akri.edit.configuration.fields.discoveryProperties.value.label"),placeholder:e.t("akri.edit.configuration.fields.discoveryProperties.value.placeholder"),mode:a.mode},null,8,["value","label","placeholder","mode","onUpdate:value"])])):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)({"single-value":"configMapRef"===i.type||"secretRef"===i.type})},[(0,o.createVNode)(s,{value:i.referenced,"onUpdate:value":t[3]||(t[3]=e=>i.referenced=e),options:l.sourceOptions,multiple:!1,"option-label":"metadata.name","option-key":"id",mode:a.mode,label:l.sourceLabel,loading:a.loading,searchable:!0},null,8,["value","options","mode","label","loading"])],2),"secretRef"!==i.type&&"configMapRef"!==i.type?((0,o.openBlock)(),(0,o.createElementBlock)("div",j,[(0,o.createVNode)(s,{value:i.key,"onUpdate:value":[t[4]||(t[4]=e=>i.key=e),l.updateRow],multiple:!1,options:i.keys,mode:a.mode,"option-label":"label",label:e.t("akri.edit.configuration.fields.discoveryProperties.key.label"),loading:a.loading},null,8,["value","options","mode","label","loading","onUpdate:value"])])):(0,o.createCommentVNode)("",!0)],64)),(0,o.createElementVNode)("div",$,[l.isView?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,type:"button",class:"btn role-link",onClick:t[5]||(t[5]=(0,o.withModifiers)((t=>e.$emit("remove")),["stop"]))},(0,o.toDisplayString)(e.t("generic.remove")),1))])])}var Y=a(65359),Z=a(75552);const G=e=>e.value?"simple":e.valueFrom?.secretKeyRef?e.valueFrom.secretKeyRef.key?"secretKeyRef":"secretRef":e.valueFrom?.configMapKeyRef?e.valueFrom.configMapKeyRef.key?"configMapKeyRef":"configMapRef":"simple";var W={name:"DiscoveryPropertyField",components:{LabeledSelect:Z.A,LabeledInput:B.LabeledInput},props:{mode:{type:String,required:!0},configMaps:{type:Array,required:!0},secrets:{type:Array,required:!0},loading:{default:!1,type:Boolean},namespaced:{type:Boolean,default:!0},value:{type:Object,default:()=>({})}},emits:["update:value","remove"],data(){const e=G(this.value),t=[];let a,o,r,i;switch(e){case"configMapKeyRef":i=this.value.valueFrom?.[e].key||"",r=this.value.valueFrom?.[e].name,o=this.configMaps.find((e=>e.metadata.name===r)),o&&o.data&&t.push(...Object.keys(o.data));break;case"secretKeyRef":i=this.value.valueFrom?.[e].key||"",r=this.value.valueFrom?.[e].name,o=this.secrets.find((e=>e.metadata.name===r)),o&&o.data&&t.push(...Object.keys(o.data));break;case"secretRef":case"configMapRef":r=this.value.valueFrom?.[e].name;break;default:a=this.value.value}return{name:this.value.name,key:i,refName:r,referenced:o,type:e,valStr:a,keys:t}},computed:{...(0,Y.L8)({t:"i18n/t"}),isView(){return this.mode===R.nW},typeOpts(){return[{value:"simple",label:this.t("akri.edit.configuration.fields.discoveryProperties.types.keyValue")},{value:"secretRef",label:this.t("akri.edit.configuration.fields.discoveryProperties.types.secretRef")},{value:"secretKeyRef",label:this.t("akri.edit.configuration.fields.discoveryProperties.types.secretKeyRef")},{value:"configMapRef",label:this.t("akri.edit.configuration.fields.discoveryProperties.types.configMapRef")},{value:"configMapKeyRef",label:this.t("akri.edit.configuration.fields.discoveryProperties.types.configMapKeyRef")}]},namespaces(){if(this.namespaced){const e=this.$store.getters.namespaces();return Object.keys(e).filter((t=>e[t]))}{const e=this.$store.getters["currentStore"](P.CU);return this.$store.getters[`${e}/all`](P.CU)}},sourceOptions(){return"configMapKeyRef"===this.type||"configMapRef"===this.type?this.configMaps.filter((e=>this.namespaces.includes(e?.metadata?.namespace))):"secretRef"===this.type||"secretKeyRef"===this.type?this.secrets.filter((e=>this.namespaces.includes(e?.metadata?.namespace))):[]},sourceLabel(){let e;if(this.type){switch(this.type){case"secretKeyRef":case"secretRef":e="akri.edit.configuration.fields.discoveryProperties.secret";break;case"configMapKeyRef":case"configMapRef":e="akri.edit.configuration.fields.discoveryProperties.configMap";break;default:e="akri.edit.configuration.fields.discoveryProperties.source"}return this.t(e)}}},watch:{type(){this.referenced=null,this.key="",this.refName="",this.keys=[],this.key="",this.valStr=""},referenced(e,t){e&&(e.type!==P.bB&&e.type!==P.K5||!e.data||(this.keys=Object.keys(e.data)),this.refName=e?.metadata?.name),this.updateRow()}},methods:{updateRow(){if(!this.name?.length)return void this.$emit("update:value",null);const e={name:this.name};switch(this.type){case"configMapKeyRef":case"secretKeyRef":e.valueFrom={[this.type]:{name:this.refName,key:this.key,optional:!1}};break;case"configMapRef":e.valueFrom={configMapKeyRef:{name:this.refName,optional:!1}};break;case"secretRef":e.valueFrom={secretKeyRef:{name:this.refName,optional:!1}};break;default:e.value=this.valStr}this.$emit("update:value",e)},get:M.Jt}},Q=(a(59871),a(47433));const z=(0,Q.A)(W,[["render",J],["__scopeId","data-v-0ab03d7a"]]);var X=z,ee={name:"DiscoveryProperties",components:{DiscoveryPropertyField:X},props:{mode:{type:String,required:!0},configMaps:{type:Array,required:!0},secrets:{type:Array,required:!0},loading:{default:!1,type:Boolean},value:{type:Array,default:()=>[]}},emits:["update:value"],data(){const e=(this.value||[]).map((({name:e,value:t,valueFrom:a})=>({id:(0,K.vx)(4),value:{name:e,value:t,valueFrom:a}})));return{properties:e}},computed:{isView(){return this.mode===R.nW}},created(){this.queueUpdate=L()(this.update,500)},methods:{update(){this.$emit("update:value",this.properties.map((e=>e.value)))},updateRow(){this.queueUpdate()},removeRow(e){this.properties.splice(e,1),this.queueUpdate()},addProperty(){this.properties.push({id:(0,K.vx)(4),value:{name:"",value:"",valueFrom:void 0}})}}};const te=(0,Q.A)(ee,[["render",F]]);var ae=te,oe=a(70651);const re={class:"row mb-20"},ie={class:"col span-6"},le={class:"row"},se={class:"col span-12"};function ne(e,t,a,r,i,l){const s=(0,o.resolveComponent)("Checkbox"),n=(0,o.resolveComponent)("ArrayList");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createElementVNode)("div",re,[(0,o.createElementVNode)("div",ie,[(0,o.createVNode)(s,{value:l.groupRecursive,"onUpdate:value":t[0]||(t[0]=e=>l.groupRecursive=e),"label-key":"akri.edit.configuration.fields.groupRecursive.label",tooltip:e.t("akri.edit.configuration.fields.groupRecursive.tooltip")},null,8,["value","tooltip"])])]),(0,o.createElementVNode)("div",le,[(0,o.createElementVNode)("div",se,[(0,o.createVNode)(n,{value:l.udevRules,mode:a.mode,title:e.t("akri.edit.configuration.fields.udevRules.label"),protip:e.t("akri.edit.configuration.fields.udevRules.description"),"add-label":e.t("akri.edit.configuration.fields.udevRules.addLabel"),"initial-empty-row":!0,"value-placeholder":'e.g. KERNEL=="video[0-9]*"',"onUpdate:value":t[1]||(t[1]=e=>l.udevRules=e)},null,8,["value","mode","title","protip","add-label"])])])])}var ce=a(20246),de=a.n(ce),ue=a(71044),pe=a(42200),ve={name:"UdevFields",components:{ArrayList:ue.A,Checkbox:pe.S},props:{mode:{type:String,default:R.YQ},value:{type:Object,required:!0}},computed:{udevRules:{get(){const e=this.getDiscoveryDetails();return e.udevRules||[]},set(e){const t=this.getDiscoveryDetails(),a={...t,udevRules:e};let o;try{o=de().dump(a)}catch(r){o=""}(0,M.hZ)(this.value,"spec.discoveryHandler.discoveryDetails",o)}},groupRecursive:{get(){const e=this.getDiscoveryDetails();return e.groupRecursive||!1},set(e){const t=this.getDiscoveryDetails(),a={...t,groupRecursive:e};let o;try{o=de().dump(a)}catch(r){o=""}(0,M.hZ)(this.value,"spec.discoveryHandler.discoveryDetails",o)}}},methods:{getDiscoveryDetails(){const e=this.value.spec?.discoveryHandler?.discoveryDetails||"{}";try{const t=de().load(e);return t}catch(t){return{}}}}};const me=(0,Q.A)(ve,[["render",ne]]);var ye=me;const fe={key:1},he={class:"icon icon-close align-value"};function ge(e,t,a,r,i,l){const s=(0,o.resolveComponent)("LabeledSelect"),n=(0,o.resolveComponent)("LabeledInput"),c=(0,o.resolveDirective)("clean-tooltip");return l.showDiscoveryHandlerNameSelect?((0,o.openBlock)(),(0,o.createBlock)(s,{key:0,value:i.discoveryHandlerName,"onUpdate:value":t[0]||(t[0]=e=>i.discoveryHandlerName=e),label:e.t("akri.edit.configuration.fields.discoveryHandlerName.label"),options:l.discoveryHandlerNameOptions,mode:a.mode,clearable:!0,required:"",loading:a.loading,onSelecting:l.handleSelectDiscoveryHandlerName},null,8,["value","label","options","mode","loading","onSelecting"])):((0,o.openBlock)(),(0,o.createElementBlock)("div",fe,[(0,o.createVNode)(n,{ref:"discoveryHandlerName",value:i.discoveryHandlerName,"onUpdate:value":t[1]||(t[1]=e=>i.discoveryHandlerName=e),mode:a.mode,loading:a.loading,label:e.t("akri.edit.configuration.fields.discoveryHandlerName.label"),rules:a.rules},null,8,["value","mode","loading","label","rules"]),a.discoveryHandlerNames.length?((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,aria:"Cancel",class:"cancel-custom-name",onClick:t[2]||(t[2]=(...e)=>l.cancelCustomDiscoveryHandlerName&&l.cancelCustomDiscoveryHandlerName(...e))},[(0,o.withDirectives)((0,o.createElementVNode)("i",he,null,512),[[c,e.t("generic.cancel")]])])):(0,o.createCommentVNode)("",!0)]))}var be={name:"DiscoveryHandlerNameField",components:{LabeledSelect:Z.A,LabeledInput:B.LabeledInput},props:{value:{type:String,default:""},mode:{type:String,default:R.YQ},discoveryHandlerNames:{type:Array,default:()=>[]},loading:{type:Boolean,default:!0},rules:{default:()=>[],type:Array,validator:e=>e.every((e=>["function"].includes(typeof e)))}},emits:["update:value"],data(){return{defineCustomDiscoveryHandlerName:!0,discoveryHandlerName:this.value}},computed:{discoveryHandlerNameOptions(){return[...this.discoveryHandlerNames,{label:"divider",disabled:!0,kind:"divider"},{label:this.t("akri.edit.configuration.fields.discoveryHandlerName.customNameOptionLabel"),value:"",kind:"highlighted"}]},showDiscoveryHandlerNameSelect(){return this.discoveryHandlerNames.length&&!this.defineCustomDiscoveryHandlerName}},watch:{discoveryHandlerName(e){this.$emit("update:value",e)},loading(e){e||(!this.discoveryHandlerNames.length||this.value&&!this.discoveryHandlerNames.includes(this.value)?this.defineCustomDiscoveryHandlerName=!0:(this.defineCustomDiscoveryHandlerName=!1,this.discoveryHandlerName=this.value||this.discoveryHandlerNames[0]))}},methods:{handleSelectDiscoveryHandlerName(e){e&&""!==e.value?this.defineCustomDiscoveryHandlerName=!1:(this.defineCustomDiscoveryHandlerName=!0,(0,o.nextTick)((()=>this.$refs.discoveryHandlerName.focus())))},cancelCustomDiscoveryHandlerName(){this.defineCustomDiscoveryHandlerName=!1,this.discoveryHandlerName=this.discoveryHandlerNames[0]}}};a(62526);const ke=(0,Q.A)(be,[["render",ge],["__scopeId","data-v-43a01491"]]);var Ne=ke,Se={name:"CruConfiguration",components:{CruResource:D.A,NameNsDescription:E.A,Tabbed:H.A,Tab:w.A,UdevFields:ye,LabeledInput:B.LabeledInput,YamlEditor:_.A,DiscoveryProperties:ae,Loading:A.A,DiscoveryHandlerNameField:Ne},mixins:[V.A,U.A,C.A],props:{mode:{type:String,default:R.YQ},resource:{type:String,default:null},value:{type:Object,required:!0}},emits:["input"],data(){return{secondaryResourceData:this.secondaryResourceDataConfig(),secrets:[],configMaps:[],allDaemonSets:[],isNamespaceNew:!1,defineCustomDiscoveryHandlerName:!1,fvFormRuleSets:[{path:"discoveryHandlerName",rules:["required"]},{path:"capacity",rules:["required"]}]}},async fetch(){this.resourceManagerFetchSecondaryResources(this.secondaryResourceData)},computed:{tabErrors(){return{discoveryHandler:this.fvGetPathErrors(["discoveryHandlerName"])?.length>0,capacity:this.fvGetPathErrors(["capacity"])?.length>0}},editorMode(){return this.isView?_.j.VIEW_CODE:_.j.EDIT_CODE},isView(){return this.mode===R.nW},discoveryHandlerName:{get(){return this.value?.spec?.discoveryHandler?.name||""},set(e){(0,M.hZ)(this.value,"spec.discoveryHandler.name",e)}},discoveryDetailsYaml:{get(){return this.value.spec?.discoveryHandler?.discoveryDetails||""},set(e){(0,M.hZ)(this.value,"spec.discoveryHandler.discoveryDetails",e)}},discoveryProperties:{get(){return this.value.spec?.discoveryHandler?.discoveryProperties||[]},set(e){(0,M.hZ)(this.value,"spec.discoveryHandler.discoveryProperties",e)}},instanceServiceSpec:{get(){return this.value.spec?.instanceServiceSpec||{type:"ClusterIP",ports:[{name:"",port:"",protocol:"",targetPort:""}]}},set(e){(0,M.hZ)(this.value,"spec.instanceServiceSpec",e)}},configurationServiceSpec:{get(){return this.value.spec?.configurationServiceSpec||{type:"ClusterIP",ports:[{name:"",port:"",protocol:"",targetPort:""}]}},set(e){(0,M.hZ)(this.value,"spec.configurationServiceSpec",e)}},capacity:{get(){return this.value.spec?.capacity},set(e){(0,M.hZ)(this.value,"spec.capacity",parseInt(e))}},brokerPodSpec:{get(){return this.value.spec?.brokerSpec?.brokerPodSpec||{}},set(e){(0,M.hZ)(this.value,"spec.brokerSpec.brokerPodSpec",e)}},brokerJobSpec:{get(){return this.value.spec?.brokerSpec?.brokerJobSpec||{}},set(e){(0,M.hZ)(this.value,"spec.brokerSpec.brokerJobSpec",e)}},discoveryHandlerNames(){return[...this.allDaemonSets.filter((e=>e.metadata.annotations[oe.K_])).map((e=>e.metadata.annotations[oe.K_])).sort()]}},methods:{secondaryResourceDataConfig(){return{data:{[P.bB]:{applyTo:[{var:"secrets",classify:!1}]},[P.K5]:{applyTo:[{var:"configMaps",classify:!1}]},[P.oU.DAEMON_SET]:{applyTo:[{var:"allDaemonSets",classify:!1}]}}}},onTabChanged({tab:e}){this.$refs[`${e.name}EditorRef`]?.refresh()}}};const Re=(0,Q.A)(Se,[["render",S]]);var De=Re},17342:function(e,t,a){"use strict";a.r(t);var o=a(36758),r=a.n(o),i=a(40935),l=a.n(i),s=l()(r());s.push([e.id,"button.cancel-custom-name[data-v-43a01491]{all:unset;height:0;position:relative;top:-35px;float:right;margin-right:7px;cursor:pointer}button.cancel-custom-name .align-value[data-v-43a01491]{padding-top:7px}",""]),t["default"]=s},41055:function(e,t,a){"use strict";a.r(t);var o=a(36758),r=a.n(o),i=a(40935),l=a.n(i),s=l()(r());s.push([e.id,".var-row[data-v-0ab03d7a]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr 100px;grid-column-gap:20px;margin-bottom:10px;align-items:center}.var-row .single-value[data-v-0ab03d7a]{grid-column:span 2}.var-row .remove BUTTON[data-v-0ab03d7a]{padding:0}",""]),t["default"]=s},62526:function(e,t,a){var o=a(17342);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var r=a(74825).A;r("c2ec378e",o,!0,{sourceMap:!1,shadowMode:!1})},59871:function(e,t,a){var o=a(41055);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var r=a(74825).A;r("11cd52b6",o,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=akri-dashboard-extension-303.0.2+up1.3.1.umd.min.edit.js.map