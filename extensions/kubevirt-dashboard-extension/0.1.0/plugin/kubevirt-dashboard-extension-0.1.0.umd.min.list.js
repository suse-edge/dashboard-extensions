(("undefined"!==typeof self?self:this)["webpackJsonpkubevirt_dashboard_extension_0_1_0"]=("undefined"!==typeof self?self:this)["webpackJsonpkubevirt_dashboard_extension_0_1_0"]||[]).push([[2],{"347e":function(e,t,a){var s=a("ec6b");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var o=a("0ed3").default;o("970b4fe6",s,!0,{sourceMap:!1,shadowMode:!1})},"3bba":function(e,t,a){var s=a("619c");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var o=a("0ed3").default;o("6163f041",s,!0,{sourceMap:!1,shadowMode:!1})},5213:function(e,t,a){var s=a("d964");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var o=a("0ed3").default;o("43c0a48b",s,!0,{sourceMap:!1,shadowMode:!1})},"619c":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".state[data-v-9c7b57a6]{display:flex;justify-content:space-between}.state .icon-warning[data-v-9c7b57a6]{margin-top:2px}",""]),e.exports=t},"66e6":function(e,t,a){"use strict";a("5213")},"940b":function(e,t,a){"use strict";a("3bba")},"984b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",[t("ResourceTable",e._g(e._b({attrs:{headers:e.headers,"default-sort-by":"age",rows:e.rows,schema:e.schema,groupable:!0,"key-field":"_key"},scopedSlots:e._u([{key:"cell:state",fn:function(e){return[t("div",{staticClass:"state"},[t("VMState",{staticClass:"vmstate",attrs:{row:e.row}})],1)]}},{key:"cell:name",fn:function(a){return[t("div",{staticClass:"name-console"},["kubevirt.io.virtualmachineinstance"!==a.row.type?t("LinkDetail",{attrs:{row:a.row},model:{value:a.row.metadata.name,callback:function(t){e.$set(a.row.metadata,"name",t)},expression:"scope.row.metadata.name"}}):t("span",[e._v(" "+e._s(a.row.metadata.name)+" ")]),t("ConsoleBar",{staticClass:"console mr-10",attrs:{resource:a.row}})],1)]}}])},"ResourceTable",e.$attrs,!1),e.$listeners))],1)},o=[],r=a("126f"),n=a("9792"),i=a("ec8b"),l=a("462f"),d=a("a8b9"),u=a("15ca"),c=a("907c"),p=function(){var e=this,t=e._self._c;return t("div",{staticClass:"vm-console-dropdown"},[t("ButtonDropdown",{attrs:{disabled:e.isOff,"no-drop":e.isOff,"button-label":"Console","dropdown-options":e.options,size:"sm"},on:{"click-action":e.handleDropdown}})],1)},h=[],v=a("4975"),m=a("9ce4"),f=a("44f6"),w={name:"VMConsoleBar",components:{ButtonDropdown:v["a"]},props:{resource:{type:Object,required:!0,default:()=>({})}},computed:{...Object(m["a"])({t:"i18n/t"}),isOff(){return this.resource.stateDisplay===f["OFF"]},options(){return[{label:this.t("kubevirt.virtualMachine.console.novnc"),value:"vnc"},{label:this.t("kubevirt.virtualMachine.console.serial"),value:"serial"}]}},methods:{handleDropdown(e){this.show(e.value)},show(e){var t;const a=this.resource.id,s=window.location.host,o=window.location.pathname.replace(this.$route.path,""),r=null===(t=this.$route)||void 0===t?void 0:t.params,n=`https://${s}${o}/${r.product}/c/${r.cluster}/console/${a}/${e}`;window.open(n,"_blank","toolbars=0,width=900,height=700,left=0,top=0,noreferrer")},isEmpty(e){return void 0!==e&&0===Object.keys(e).length}}},g=w,b=(a("66e6"),a("d802")),y=Object(b["a"])(g,p,h,!1,null,null,null),M=y.exports,_=a("377f"),k={name:"VirtualMachineList",components:{Loading:u["a"],VMState:i["default"],LinkDetail:n["a"],ConsoleBar:M,ResourceTable:r["a"]},props:{schema:{type:Object,required:!0}},async fetch(){const e=[_["d"],_["c"],c["n"],c["p"]],t=e.reduce((e,t)=>(this.$store.getters["cluster/schemaFor"](t)&&(e[t]=this.$store.dispatch("cluster/findAll",{type:t})),e),{}),a=await Object(d["a"])(t);this.allVMs=a[_["d"]]||[],this.allVMIs=a[_["c"]]||[]},data(){return{allVMs:[],allVMIs:[]}},computed:{headers(){return[l["H"],l["s"],l["t"],{name:"CPU",label:"CPU",sort:["cpuCores"],value:"cpuCores",align:"center",dashIfEmpty:!0},{name:"Memory",value:"displayMemory",sort:["memorySort"],align:"center",labelKey:"tableHeaders.memory",formatter:"Si",formatterOpts:{opts:{increment:1024,addSuffix:!0,maxExponent:3,minExponent:3,suffix:"i"},needParseSi:!0}},{name:"ip",label:"IP Address",value:"id",formatter:"IPAddress",labelKey:"tableHeaders.ipAddress",dashIfEmpty:!0},{name:"node",labelKey:"tableHeaders.node",value:"nodeName",formatter:"LinkName",formatterOpts:{type:c["n"]},dashIfEmpty:!0},{...l["b"],sort:"metadata.creationTimestamp:desc"}]},rows(){const e=this.allVMIs.filter(e=>!this.allVMs.find(t=>t.id===e.id));return[...this.allVMs,...e]}}},x=k,C=(a("9a13"),Object(b["a"])(x,s,o,!1,null,"5455d59d",null));t["default"]=C.exports},"9a13":function(e,t,a){"use strict";a("347e")},d964:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".vm-console-dropdown .btn{line-height:24px;min-height:24px}",""]),e.exports=t},ec6b:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".state[data-v-5455d59d]{display:flex}.state .vmstate[data-v-5455d59d]{margin-right:6px}.name-console[data-v-5455d59d]{align-items:center;display:flex;justify-content:space-around}.name-console span[data-v-5455d59d]{line-height:26px;width:160px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-o-text-overflow:ellipsis}",""]),e.exports=t},ec8b:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("span",[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.isMigrating,expression:"!isMigrating"}],staticClass:"state"},[t("BadgeStateFormatter",{attrs:{row:e.row}}),e.warningMessage.length?t("v-popover",{attrs:{trigger:"hover",offset:"16"}},[t("span",{staticClass:"tooltip-target"},[t("i",{staticClass:"icon icon-warning icon-lg text-warning"})]),t("template",{slot:"popover"},e._l(e.warningMessage,(function(a,s){return t("p",{key:a},[e._v(" "+e._s(s+1)+". "+e._s(a)+" ")])})),0)],2):e._e()],1)])},o=[],r=a("7b24"),n={components:{BadgeStateFormatter:r["a"]},props:{value:{type:String,default:""},row:{type:Object,required:!0},allNodeNetwork:{type:Array,default:()=>[]},allClusterNetwork:{type:Array,default:()=>[]}},data(){return{isMigrating:!1}},computed:{networkImpassability(){var e,t,a;const s=null===(e=this.row)||void 0===e?void 0:e.nodeName,o=this.allNodeNetwork.find(e=>e.attachNodeName===s);return(!(null===o||void 0===o||!o.message)||!this.enableClusterNetwork)&&(null===(t=this.row)||void 0===t?void 0:t.attachNetwork)&&"Running"===(null===this||void 0===this||null===(a=this.row)||void 0===a?void 0:a.actualState)},enableClusterNetwork(){var e;const t=(null===(e=this.allClusterNetwork)||void 0===e?void 0:e[0])||{};return null===t||void 0===t?void 0:t.enable},warningMessage(){var e,t,a,s;const o=[];if(this.networkImpassability&&this.allClusterNetwork.length&&o.push(this.t("kubevirt.network.message.vlanInactive",{name:this.row.realAttachNodeName})),null!==(e=this.row.warningMessage)&&void 0!==e&&e.pod){var r,n,i,l;const e=this.row.warningMessage.pod;var d,u;if(null!==(r=e.metadata)&&void 0!==r&&null!==(n=r.state)&&void 0!==n&&n.error&&!/pod has unbound immediate PersistentVolumeClaims/.test(null===(i=e.metadata)||void 0===i||null===(l=i.state)||void 0===l?void 0:l.message))o.push(null===(d=e.metadata)||void 0===d||null===(u=d.state)||void 0===u?void 0:u.message)}var c,p;"VM error"===(null===(t=this.row)||void 0===t?void 0:t.actualState)&&null!==(a=this.row.warningMessage)&&void 0!==a&&a.message&&o.push(null===(c=this.row.warningMessage)||void 0===c?void 0:c.message);null!==(s=this.row)&&void 0!==s&&s.migrationMessage&&o.push(null===(p=this.row)||void 0===p?void 0:p.migrationMessage.message);return o}},methods:{migrationStateChanged(e){this.isMigrating="Failed"!==e&&!!e}}},i=n,l=(a("940b"),a("d802")),d=Object(l["a"])(i,s,o,!1,null,"9c7b57a6",null);t["default"]=d.exports}}]);
//# sourceMappingURL=kubevirt-dashboard-extension-0.1.0.umd.min.list.js.map