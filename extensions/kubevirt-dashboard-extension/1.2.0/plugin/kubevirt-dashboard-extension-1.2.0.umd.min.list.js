(("undefined"!==typeof self?self:this)["webpackChunkkubevirt_dashboard_extension_1_2_0"]=("undefined"!==typeof self?self:this)["webpackChunkkubevirt_dashboard_extension_1_2_0"]||[]).push([[715],{3995:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var o=a(9274);const s=e=>((0,o.pushScopeId)("data-v-c9f308c6"),e=e(),(0,o.popScopeId)(),e),r={class:"state"},n=s((()=>(0,o.createElementVNode)("span",{class:"tooltip-target"},[(0,o.createElementVNode)("i",{class:"icon icon-warning icon-lg text-warning"})],-1)));function l(e,t,a,s,l,i){const c=(0,o.resolveComponent)("BadgeStateFormatter"),d=(0,o.resolveComponent)("VDropdown");return(0,o.openBlock)(),(0,o.createElementBlock)("span",null,[(0,o.withDirectives)((0,o.createElementVNode)("div",r,[(0,o.createVNode)(c,{row:a.row},null,8,["row"]),i.warningMessage.length?((0,o.openBlock)(),(0,o.createBlock)(d,{key:0,trigger:"hover",offset:"16"},{popover:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(i.warningMessage,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("p",{key:e},(0,o.toDisplayString)(t+1)+". "+(0,o.toDisplayString)(e),1)))),128))])),default:(0,o.withCtx)((()=>[n])),_:1})):(0,o.createCommentVNode)("",!0)],512),[[o.vShow,!l.isMigrating]])])}var i=a(857),c={components:{BadgeStateFormatter:i.A},props:{value:{type:String,default:""},row:{type:Object,required:!0},allNodeNetwork:{type:Array,default:()=>[]},allClusterNetwork:{type:Array,default:()=>[]}},data(){return{isMigrating:!1}},computed:{networkImpassability(){const e=this.row?.nodeName,t=this.allNodeNetwork.find((t=>t.attachNodeName===e));return(!!t?.message||!this.enableClusterNetwork)&&this.row?.attachNetwork&&"Running"===this?.row?.actualState},enableClusterNetwork(){const e=this.allClusterNetwork?.[0]||{};return e?.enable},warningMessage(){const e=[];if(this.networkImpassability&&this.allClusterNetwork.length&&e.push(this.t("kubevirt.network.message.vlanInactive",{name:this.row.realAttachNodeName})),this.row.warningMessage?.pod){const t=this.row.warningMessage.pod;t.metadata?.state?.error&&!/pod has unbound immediate PersistentVolumeClaims/.test(t.metadata?.state?.message)&&e.push(t.metadata?.state?.message)}return"VM error"===this.row?.actualState&&this.row.warningMessage?.message&&e.push(this.row.warningMessage?.message),this.row?.migrationMessage&&e.push(this.row?.migrationMessage.message),e}},methods:{migrationStateChanged(e){this.isMigrating="Failed"!==e&&!!e}}},d=(a(4039),a(7433));const p=(0,d.A)(c,[["render",l],["__scopeId","data-v-c9f308c6"]]);var u=p},507:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return _}});var o=a(9274);const s={key:1},r={class:"state"},n={class:"name-console"},l={key:1};function i(e,t,a,i,c,d){const p=(0,o.resolveComponent)("Loading"),u=(0,o.resolveComponent)("VMState"),m=(0,o.resolveComponent)("LinkDetail"),h=(0,o.resolveComponent)("ConsoleBar"),w=(0,o.resolveComponent)("ResourceTable");return e.$fetchState.pending?((0,o.openBlock)(),(0,o.createBlock)(p,{key:0})):((0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createVNode)(w,(0,o.mergeProps)(e.$attrs,{headers:d.headers,"default-sort-by":"age",rows:d.rows,schema:a.schema,groupable:!0,"key-field":"_key"}),{"cell:state":(0,o.withCtx)((e=>[(0,o.createElementVNode)("div",r,[(0,o.createVNode)(u,{class:"vmstate",row:e.row},null,8,["row"])])])),"cell:name":(0,o.withCtx)((e=>[(0,o.createElementVNode)("div",n,["kubevirt.io.virtualmachineinstance"!==e.row.type?((0,o.openBlock)(),(0,o.createBlock)(m,{key:0,value:e.row.metadata.name,"onUpdate:value":t=>e.row.metadata.name=t,row:e.row},null,8,["value","onUpdate:value","row"])):((0,o.openBlock)(),(0,o.createElementBlock)("span",l,(0,o.toDisplayString)(e.row.metadata.name),1)),(0,o.createVNode)(h,{resource:e.row,class:"console mr-10"},null,8,["resource"])])])),_:1},16,["headers","rows","schema"])]))}var c=a(788),d=a(1052),p=a(3995),u=a(988),m=a(8339),h=a(4409),w=a(5664);const f={class:"vm-console-dropdown"};function v(e,t,a,s,r,n){const l=(0,o.resolveComponent)("ButtonDropdown");return(0,o.openBlock)(),(0,o.createElementBlock)("div",f,[(0,o.createVNode)(l,{disabled:n.isOff,"no-drop":n.isOff,"button-label":"Console","dropdown-options":n.options,size:"sm",onClickAction:n.handleDropdown},null,8,["disabled","no-drop","dropdown-options","onClickAction"])])}var g=a(5186),k=a(5359),y=a(784),b={name:"VMConsoleBar",components:{ButtonDropdown:g.A},props:{resource:{type:Object,required:!0,default:()=>({})}},computed:{...(0,k.L8)({t:"i18n/t"}),isOff(){return this.resource.stateDisplay===y.OFF},options(){return[{label:this.t("kubevirt.virtualMachine.console.novnc"),value:"vnc"},{label:this.t("kubevirt.virtualMachine.console.serial"),value:"serial"}]}},methods:{handleDropdown(e){this.show(e.value)},show(e){const t=this.resource.id,a=window.location.host,o=window.location.pathname.replace(this.$route.path,""),s=this.$route?.params,r=`https://${a}${o}/${s.product}/c/${s.cluster}/console/${t}/${e}`;window.open(r,"_blank","toolbars=0,width=900,height=700,left=0,top=0,noreferrer")},isEmpty(e){return void 0!==e&&0===Object.keys(e).length}}},M=(a(1280),a(7433));const C=(0,M.A)(b,[["render",v]]);var N=C,x=a(6214),B={name:"VirtualMachineList",components:{Loading:h.A,VMState:p["default"],LinkDetail:d.A,ConsoleBar:N,ResourceTable:c.A},props:{schema:{type:Object,required:!0}},data(){return{allVMs:[],allVMIs:[]}},async fetch(){const e=[x.zl,x.Mm,w.NW,w.Sm],t=e.reduce(((e,t)=>(this.$store.getters["cluster/schemaFor"](t)&&(e[t]=this.$store.dispatch("cluster/findAll",{type:t})),e)),{}),a=await(0,m.kR)(t);this.allVMs=a[x.zl]||[],this.allVMIs=a[x.Mm]||[]},computed:{headers(){return[u.c4,u.o_,u.CU,{name:"RunStrategy",label:"Run Strategy",value:"runStrategyLabel"},{name:"CPU",label:"CPU",sort:["cpuCores"],value:"cpuCores",align:"center",dashIfEmpty:!0},{name:"Memory",value:"displayMemory",sort:["memorySort"],align:"center",labelKey:"tableHeaders.memory",formatter:"Si",formatterOpts:{opts:{increment:1024,addSuffix:!0,maxExponent:3,minExponent:3,suffix:"i"},needParseSi:!0}},{name:"ip",label:"IP Address",value:"id",formatter:"IPAddress",labelKey:"tableHeaders.ipAddress",dashIfEmpty:!0},{name:"node",labelKey:"tableHeaders.node",value:"nodeName",formatter:"LinkName",formatterOpts:{type:w.NW},dashIfEmpty:!0},{...u.K,sort:"metadata.creationTimestamp:desc"}]},rows(){const e=this.allVMIs.filter((e=>!this.allVMs.find((t=>t.id===e.id))));return[...this.allVMs,...e]}}};a(4472);const V=(0,M.A)(B,[["render",i],["__scopeId","data-v-d67be03e"]]);var _=V},7472:function(e,t,a){"use strict";a.r(t);var o=a(6758),s=a.n(o),r=a(6173),n=a.n(r),l=n()(s());l.push([e.id,".vm-console-dropdown .btn{line-height:24px;min-height:24px}",""]),t["default"]=l},2615:function(e,t,a){"use strict";a.r(t);var o=a(6758),s=a.n(o),r=a(6173),n=a.n(r),l=n()(s());l.push([e.id,".state[data-v-c9f308c6]{display:flex;justify-content:space-between}.state .icon-warning[data-v-c9f308c6]{margin-top:2px}",""]),t["default"]=l},680:function(e,t,a){"use strict";a.r(t);var o=a(6758),s=a.n(o),r=a(6173),n=a.n(r),l=n()(s());l.push([e.id,".state[data-v-d67be03e]{display:flex}.state .vmstate[data-v-d67be03e]{margin-right:6px}.name-console[data-v-d67be03e]{align-items:center;display:flex;justify-content:space-around}.name-console span[data-v-d67be03e]{line-height:26px;width:160px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-o-text-overflow:ellipsis}",""]),t["default"]=l},1280:function(e,t,a){var o=a(7472);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(4825).A;s("b2868648",o,!0,{sourceMap:!1,shadowMode:!1})},4039:function(e,t,a){var o=a(2615);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(4825).A;s("40cef760",o,!0,{sourceMap:!1,shadowMode:!1})},4472:function(e,t,a){var o=a(680);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(4825).A;s("7aca90b5",o,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=kubevirt-dashboard-extension-1.2.0.umd.min.list.js.map